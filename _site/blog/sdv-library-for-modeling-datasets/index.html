<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Essi">

<title>Essi Alizadeh ‚Äì index</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-180647948-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Essi Alizadeh</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">Blog</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#synthetic-data-vault-sdv-a-python-library-for-dataset-modeling" id="toc-synthetic-data-vault-sdv-a-python-library-for-dataset-modeling" class="nav-link active" data-scroll-target="#synthetic-data-vault-sdv-a-python-library-for-dataset-modeling">Synthetic Data Vault (SDV): A Python Library for Dataset Modeling</a>
  <ul>
  <li><a href="#why-this-library" id="toc-why-this-library" class="nav-link" data-scroll-target="#why-this-library">Why this library?</a></li>
  </ul></li>
  <li><a href="#sdv-library" id="toc-sdv-library" class="nav-link" data-scroll-target="#sdv-library">SDV Library</a>
  <ul>
  <li><a href="#time-series-data-modeling-using-par" id="toc-time-series-data-modeling-using-par" class="nav-link" data-scroll-target="#time-series-data-modeling-using-par">Time-Series Data Modeling using PAR</a>
  <ul class="collapse">
  <li><a href="#sample-code" id="toc-sample-code" class="nav-link" data-scroll-target="#sample-code">Sample code</a></li>
  <li><a href="#example-1-single-time-series-one-entity" id="toc-example-1-single-time-series-one-entity" class="nav-link" data-scroll-target="#example-1-single-time-series-one-entity"><strong>Example 1: Single Time-Series (one entity)</strong></a></li>
  <li><a href="#example-2-time-series-with-multiple-entities" id="toc-example-2-time-series-with-multiple-entities" class="nav-link" data-scroll-target="#example-2-time-series-with-multiple-entities"><strong>Example 2: Time-series with multiple entities</strong></a></li>
  </ul></li>
  <li><a href="#relational-data" id="toc-relational-data" class="nav-link" data-scroll-target="#relational-data">Relational Data</a></li>
  <li><a href="#single-table-data" id="toc-single-table-data" class="nav-link" data-scroll-target="#single-table-data">Single Table Data</a></li>
  <li><a href="#benchmarking-data" id="toc-benchmarking-data" class="nav-link" data-scroll-target="#benchmarking-data">Benchmarking Data</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#join-my-mailing-list" id="toc-join-my-mailing-list" class="nav-link" data-scroll-target="#join-my-mailing-list"><strong>üì© Join my mailing list</strong></a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><strong>References</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">



<section id="synthetic-data-vault-sdv-a-python-library-for-dataset-modeling" class="level1 page-columns page-full">
<h1>Synthetic Data Vault (SDV): A Python Library for Dataset Modeling</h1>
<p>Created: March 4, 2021 7:28 PM Last Updated: February 25, 2021 Last updated: September 7, 2022 10:13 PM Reading Time: 6 min read Show on Homepage?: No Tags: Data Modeling, Data Science, Machine Learning, Python Library, Time Series Analysis id: 4</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://ealizadeh.com/wp-content/uploads/2020/11/BP04_SDV_featured_image.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">https://ealizadeh.com/wp-content/uploads/2020/11/BP04_SDV_featured_image.png</figcaption><p></p>
</figure>
</div>
<aside>
<p>üëâ This article is also published on <a href="https://towardsdatascience.com/synthetic-data-vault-sdv-a-python-library-for-dataset-modeling-b48c406e7398"><strong>Towards Data Science blog</strong></a>.</p>
</aside>
<p>In data science, you usually need a realistic dataset to test your proof of concept. Creating fake data that captures the behavior of the actual data may sometimes be a rather tricky task. Several python packages try to achieve this task. Few popular python packages are&nbsp;<strong><a href="https://github.com/joke2k/faker/">Faker</a></strong>,&nbsp;<strong><a href="https://github.com/lk-geimfari/mimesis">Mimesis</a></strong>. However, there are mostly generating simple data like generating names, addresses, emails,&nbsp;<em>etc</em>.</p>
<p>To create data that captures the attributes of a complex dataset, like having time-series that somehow capture the actual data‚Äôs statistical properties, we will need a tool that generates data using different approaches. <a href="https://sdv.dev/">Synthetic Data Vault (SDV)</a> python library is a tool that models complex datasets using statistical and machine learning models. This tool can be a great new tool in the toolbox of anyone who works with data and modeling.</p>
<section id="why-this-library" class="level2">
<h2 class="anchored" data-anchor-id="why-this-library">Why this library?</h2>
<p>The main reason I‚Äôm interested in this tool is for&nbsp;<em>system testing</em>: It‚Äôs much better to have datasets that are generated from the same actual underlying process. This way we can test our work/model in a realistic scenario rather than having unrealistic cases. There are other reasons why we need synthetic data such as <em>data understanding, data compression, data augmentation</em>, and <em>data privacy</em> <a href="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a.md">[1]</a><em>.</em></p>
<p>The&nbsp;<a href="https://sdv.dev/">Synthetic Data Vault (SDV)</a>&nbsp;was first introduced in the paper&nbsp;‚Äú<a href="https://dai.lids.mit.edu/wp-content/uploads/2018/03/SDV.pdf">The Synthetic data vault</a>‚Äú, then used in the context of generative modeling in the master thesis ‚Äú<a href="https://dspace.mit.edu/handle/1721.1/109616">The Synthetic Data Vault: Generative Modeling for Relational Databases</a>‚Äù&nbsp;by Neha Patki. Finally, the SDV library was developed as a part of Andrew Montanez‚Äôs master thesis&nbsp;‚Äú<a href="https://dai.lids.mit.edu/wp-content/uploads/2018/12/Andrew_MEng.pdf">SDV: An Open Source Library for Synthetic Data Generation</a>‚Äú. Another master thesis to add new features to SDV was done by Lei Xu&nbsp;‚Äú<a href="https://dai.lids.mit.edu/wp-content/uploads/2020/02/Lei_SMThesis_neo.pdf">Synthesizing Tabular Data using conditional GAN</a>‚Äú.</p>
<p>All these work and research were done in the MIT Data-to-AI laboratory under the supervision of Kalyan Veeramachaneni ‚Äì a principal research scientist at MIT Laboratory for Information and Decision Systems (LIDS, MIT).</p>
<p>The reason I‚Äôm bringing the history of the SDV is to appreciate the amount of work and research that has gone behind this library. An interesting article talking about the potential of using this tool, particularly in data privacy is available <a href="https://news.mit.edu/2020/real-promise-synthetic-data-1016">here</a>.</p>
</section>
</section>
<section id="sdv-library" class="level1">
<h1>SDV Library</h1>
<p>The workflow of this library is shown below. A user provides the data and the schema and then fits a model to the data. At last, new synthetic data is obtained from the fitted model <a href="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a.md">[2]</a>. Moreover, the SDV library allows the user to save a fitted model (<code>model.save("model.pkl")</code>) for any future use.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Untitled.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">The SDV workflow (reprinted from [2])</figcaption><p></p>
</figure>
</div>
<p>The SDV workflow (reprinted from [2])</p>
<section id="time-series-data-modeling-using-par" class="level2">
<h2 class="anchored" data-anchor-id="time-series-data-modeling-using-par">Time-Series Data Modeling using PAR</h2>
<p>A probabilistic autoregressive (PAR) model is used to model multi-type multivariate time-series data. The SDV library has this model implemented in&nbsp;the <code>PAR</code>&nbsp;class&nbsp;(from time-series module).</p>
<p>Let‚Äôs work out an example to explain different arguments of&nbsp;<code>PAR</code>&nbsp;class. We are going to work with a time-series of temperatures in multiple cities. The dataset will have the following column:&nbsp;<em>Date</em>,&nbsp;<em>City</em>,&nbsp;<em>Measuring Device</em>,&nbsp;<em>Where, Noise</em>.</p>
<p>In&nbsp;<code>PAR</code>, there are four types of columns considered in a dataset.</p>
<ol type="1">
<li><strong>Sequence Index</strong>: This is the data column with the row dependencies (should be sorted like datetime or numeric values). In time-series, this is usually the time axis. In our example, the sequence index will be the&nbsp;Date&nbsp;column.</li>
<li><strong>Entity Columns</strong>: These columns are the abstract entities that form the group of measurements, where each group is a time-series (hence the rows within each group should be sorted). However, rows of different entities are independent of each other. In our example, the entity column(s) will be only the&nbsp;City&nbsp;column. By the way, we can have more columns as the argument type should be a list.</li>
<li><strong>Context Columns</strong>: These columns provide information about the time-series‚Äô entities and will not change over time. In other words, the&nbsp;context columns should be constant within groups. In our example,&nbsp;Measuring Device&nbsp;and&nbsp;Where&nbsp;are the context columns.</li>
<li><strong>Data Columns</strong>: Any other columns that do not belong to the above categories will be considered data columns. The&nbsp;PAR&nbsp;class does not have an argument for assigning data columns. So, the remaining columns that are not listed in any of the previous three categories will automatically be considered data columns. In our example, the&nbsp;<em>Noise</em>&nbsp;column is the data column.</li>
</ol>
<section id="sample-code" class="level3">
<h3 class="anchored" data-anchor-id="sample-code">Sample code</h3>
</section>
<section id="example-1-single-time-series-one-entity" class="level3">
<h3 class="anchored" data-anchor-id="example-1-single-time-series-one-entity"><strong>Example 1: Single Time-Series (one entity)</strong></h3>
<p>The PAR model for time series is implemented in&nbsp;<code>PAR()</code>&nbsp;class from&nbsp;<code>sdv.timeseries</code>&nbsp;module. If we want to model a single time-series data, then we only need to set the&nbsp;<code>sequence_index</code>&nbsp;argument of the&nbsp;<code>PAR()</code>&nbsp;class to the datetime column (the column illustrating the order of the time-series sequence).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sdv.timeseries <span class="im">import</span> PAR</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>actual_data <span class="op">=</span> pd.read_csv(<span class="st">"./daily_min_temperature_data_melbourne.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>actual_data[<span class="st">"Date"</span>] <span class="op">=</span> pd.to_datetime(actual_data[<span class="st">"Date"</span>])</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define -&gt; Fit -&gt; Save a PAR model</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> PAR(sequence_index<span class="op">=</span><span class="st">"Date"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>model.fit(actual_data)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>model.save(<span class="st">"data_generation_model_single_city.pkl"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># After a model is trained and pickled. We can comment above code and just load the model next time. </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> PAR.load(<span class="st">"data_generation_model_single_city.pkl"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate new data</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> model1.sample(num_sequences<span class="op">=</span><span class="dv">1</span>)   <span class="co"># may take few seconds to generate</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>new_data[<span class="st">"Date"</span>] <span class="op">=</span> pd.to_datetime(new_data[<span class="st">"Date"</span>])</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare descriptive statistics</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>stat_info1 <span class="op">=</span> actual_data.describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"Real Data"</span>})</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>stat_info2 <span class="op">=</span> new_data.describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"PAR Generated Data"</span>})</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stat_info1.join(stat_info2))</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>stat_info1.join(stat_info2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Untitled%201.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Untitled%201.png</figcaption><p></p>
</figure>
</div>
</section>
<section id="example-2-time-series-with-multiple-entities" class="level3">
<h3 class="anchored" data-anchor-id="example-2-time-series-with-multiple-entities"><strong>Example 2: Time-series with multiple entities</strong></h3>
<p>The SDV is capable of having multiple entities meaning multiple time-series. In our example, we have temperature measurements for multiple cities. In other words, each city has a group of measurements that will be treated independently.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sdv.timeseries <span class="im">import</span> PAR</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>all_data <span class="op">=</span> pd.read_csv(<span class="st">"./fake_time_series_data_multiple_cities.csv"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>all_data[<span class="st">"Date"</span>] <span class="op">=</span> pd.to_datetime(all_data[<span class="st">"Date"</span>])</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define -&gt; Fit -&gt; Save a PAR model</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> PAR(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    entity_columns<span class="op">=</span>[<span class="st">"City"</span>],</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    context_columns<span class="op">=</span>[<span class="st">"Measuring Device"</span>, <span class="st">"Location"</span>],</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    sequence_index<span class="op">=</span><span class="st">"Date"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>model.fit(all_data)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>model.save(<span class="st">"data_generation_model_multiple_city.pkl"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># After a model is trained and pickled. We can comment above code and just load the model next time. </span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> PAR.load(<span class="st">"data_generation_model_multiple_city.pkl"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate new data for two fake cities</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> model1.sample(num_sequences<span class="op">=</span><span class="dv">2</span>)   <span class="co"># may take few seconds to generate</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare descriptive statistics</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>stat_info1 <span class="op">=</span> all_data.describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"Original Data"</span>})</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>stat_info2 <span class="op">=</span> new_cities[new_cities[<span class="st">"City"</span>] <span class="op">==</span> cities[<span class="dv">0</span>]].describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="ss">f"PAR Generated Data </span><span class="sc">{</span>cities[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>})</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>stat_info3 <span class="op">=</span> new_cities[new_cities[<span class="st">"City"</span>] <span class="op">==</span> cities[<span class="dv">1</span>]].describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="ss">f"PAR Generated Data </span><span class="sc">{</span>cities[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>})</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>stat_info4 <span class="op">=</span> all_data[all_data[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"City A"</span>].describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"Original Data (City A)"</span>})</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>stat_info5 <span class="op">=</span> all_data[all_data[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"City B"</span>].describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"Original Data (City B)"</span>})</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>stat_info6 <span class="op">=</span> all_data[all_data[<span class="st">"City"</span>] <span class="op">==</span> <span class="st">"City C"</span>].describe().rename(columns<span class="op">=</span>{<span class="st">"Temp"</span>: <span class="st">"Original Data (City C)"</span>})</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>stat_comparison <span class="op">=</span> stat_info1.join(stat_info2).join(stat_info3).join(stat_info4).join(stat_info5).join(stat_info6)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>stat_comparison</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Untitled%202.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Untitled%202.png</figcaption><p></p>
</figure>
</div>
<p>A detailed example of time-series modeling using the PAR model can be found <a href="https://sdv.dev/SDV/user_guides/timeseries/par.html">here</a>.</p>
</section>
</section>
<section id="relational-data" class="level2">
<h2 class="anchored" data-anchor-id="relational-data">Relational Data</h2>
<p>SDV can model relational datasets by generating data after you specify the data schema using&nbsp;<code>sdv.Metadata()</code>. Moreover, you can plot the <a href="https://www.guru99.com/er-diagram-tutorial-dbms.html"><strong>entity-relationship (ER) diagram</strong></a> by using the library built-in function. After the metadata is ready, new data can be generated using the Hierarchical Modeling Algorithm. You can find more information&nbsp;<a href="https://sdv.dev/SDV/user_guides/relational/index.html"><strong>here</strong></a>.</p>
</section>
<section id="single-table-data" class="level2">
<h2 class="anchored" data-anchor-id="single-table-data">Single Table Data</h2>
<p>SDV can also model a single table dataset. It uses statistical and deep learning models that are:</p>
<ul>
<li>A <a href="https://sdv.dev/SDV/user_guides/single_table/gaussian_copula.html#gaussian-copula"><strong>Gaussian Copula</strong></a> to model the multivariate distribution, and</li>
<li>A Generative Adversarial Network (GAN) to model tabular data (based on the paper&nbsp;‚Äú<a href="https://arxiv.org/abs/1907.00503"><strong>Modeling Tabular data using Conditional GAN</strong></a>‚Äú.</li>
</ul>
<p>More information about modeling single table datasets is available&nbsp;<a href="https://sdv.dev/SDV/user_guides/single_table/index.html"><strong>here</strong></a>.</p>
</section>
<section id="benchmarking-data" class="level2">
<h2 class="anchored" data-anchor-id="benchmarking-data">Benchmarking Data</h2>
<p>The SDV library provides the ability to benchmark synthetic data generators using&nbsp;the <a href="https://github.com/sdv-dev/SDGym"><strong>SDGym library</strong></a>&nbsp;to evaluate the performance of synthesizer. You can find more information&nbsp;<a href="https://sdv.dev/SDV/user_guides/benchmarking/single_table.html"><strong>here</strong></a>.</p>
<hr>
</section>
</section>
<section id="conclusion" class="level1 page-columns page-full">
<h1>Conclusion</h1>
<p>In this post, we went over the main features of the SDV library and how useful it is in generating anonymous datasets based on realistic data. The main features are modeling single table data, time-series, relational datasets, and also data benchmarking. One point to mention here is that you need to provide a large dataset for SDV models to train with. This way, the model can generate a meaningful dataset that truly captures the real process. Give this library a try and let me know what you think?</p>
<aside>
<p>üìì You can find the notebook for this post on <a href="https://github.com/e-alizadeh/medium/blob/master/notebooks/SDV/SDV.ipynb">GitHub</a>.</p>
</aside>
<hr>
<p><strong>Thanks for reading üôè</strong></p>
<p><em>If you liked this post, you can join my mailing list to receive similar posts. You can follow me on <a href="https://www.linkedin.com/in/alizadehesmaeil/">LinkedIn</a>, <a href="https://github.com/e-alizadeh">GitHub</a>, <a href="https://twitter.com/intent/follow?screen_name=es_alizadeh&amp;tw_p=followbutton">Twitter</a> and <a href="https://medium.com/@ealizadeh">Medium</a>.</em></p>
<p><em>And finally, you can find my knowledge forest üå≤ (raw digital notes) at <a href="https://notes.ealizadeh.com/">notes.ealizadeh.com</a>.</em></p>
</section>
<section id="join-my-mailing-list" class="level1">
<h1><strong>üì© Join my mailing list</strong></h1>
<p><a href="https://chilipepper.io/form/burning-darkcrimson-piquillo-fcdff002-5e7b-4d46-a75e-6290908a51f4">https://chilipepper.io/form/burning-darkcrimson-piquillo-fcdff002-5e7b-4d46-a75e-6290908a51f4</a></p>
<hr>
</section>
<section id="references" class="level1">
<h1><strong>References</strong></h1>
<p>[1] Lei Xu,&nbsp;<a href="https://dai.lids.mit.edu/wp-content/uploads/2020/02/Lei_SMThesis_neo.pdf">Synthesizing Tabular Data using Conditional GAN</a>, (2020), Master thesis, MIT</p>
<p>[2] N. Patki&nbsp;<em>et al</em>,&nbsp;<a href="https://dai.lids.mit.edu/wp-content/uploads/2018/03/SDV.pdf">The Synthetic data vault</a>&nbsp;(2016), International Conference on Data Science and Advance Analytics (DSAA-16)</p>
<p>[3] MIT News,&nbsp;<a href="https://news.mit.edu/2020/real-promise-synthetic-data-1016">The real promise of synthetic data</a>&nbsp;(Ocotber 16, 2020)</p>
<hr>
<p>‚¨ÖÔ∏è <strong>Previous Post</strong></p>
<p><a href="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Blog%20Posts%2090be1d7275d04ff6b452cd57ba789b17.csv">Blog Posts</a></p>
<p><strong>‚û°Ô∏è Next Post</strong></p>
<p><a href="Synthetic%20Data%20Vault%20(SDV)%20A%20Python%20Library%20for%20Da%204335036dc6a34840ad641aa682aff56a/Blog%20Posts%20b1006b421cf943fb849245b5623887de.csv">Blog Posts</a></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{essi,
  author = {Essi},
  editor = {},
  url = {https://ealizadeh.com/blog/sdv-library-for-modeling-datasets},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-essi" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Essi. n.d. <a href="https://ealizadeh.com/blog/sdv-library-for-modeling-datasets">https://ealizadeh.com/blog/sdv-library-for-modeling-datasets</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">¬©Ô∏è 2022 Esmaeil Alizadeh - All Rights Reserved</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/e-alizadeh">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/es_alizadeh">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>